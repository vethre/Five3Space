<!DOCTYPE html>
<html lang="{{.Lang}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Text.Shop}}</title>
    <style>
        :root {
            --bg-dark: #0f0502;
            --primary: #ff4500;
            --accent: #ffae00;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-main: #ffffff;
            --text-muted: rgba(255, 255, 255, 0.5);
            --font-main: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }
        body { margin:0; font-family:var(--font-main); background:var(--bg-dark); color:var(--text-main); }
        .container { max-width:1200px; margin:0 auto; padding:20px; }
        .top-bar { display:flex; justify-content:space-between; margin-bottom:30px; border-bottom:1px solid var(--glass-border); padding-bottom:20px; }
        .brand { font-weight:900; font-size:1.2rem; color:var(--text-muted); }
        .coin-bal { background:rgba(255,215,0,0.1); border:1px solid gold; color:gold; padding:8px 16px; border-radius:99px; font-weight:bold; }
        .close { color:white; text-decoration:none; font-size:1.5rem; }

        .section-title { font-size:1.5rem; font-weight:900; margin:30px 0 15px; color:white; border-bottom:1px solid #333; padding-bottom:5px; }
        .cards { display:grid; grid-template-columns:repeat(auto-fill, minmax(260px, 1fr)); gap:20px; }
        .card { background:var(--glass-bg); border:1px solid var(--glass-border); border-radius:16px; padding:20px; display:flex; flex-direction:column; }
        
        .icon-box { height:100px; display:flex; align-items:center; justify-content:center; font-size:3rem; background:rgba(0,0,0,0.3); border-radius:12px; margin-bottom:15px; }
        .card-title { font-weight:bold; font-size:1.1rem; }
        .card-desc { font-size:0.9rem; color:var(--text-muted); flex:1; margin-bottom:15px; }
        .price { font-weight:900; font-size:1.2rem; color:white; }
        .buy-btn { background:white; border:none; padding:10px; border-radius:8px; font-weight:900; cursor:pointer; margin-top:10px; width:100%; transition:0.2s; }
        .buy-btn:hover { transform:scale(1.02); }
        .buy-btn.coins { background:linear-gradient(135deg, #ffae00, #ff4e50); color:white; }
        .buy-btn.real { background:linear-gradient(135deg, #43e97b, #38f9d7); color:#000; }
    </style>
</head>
<body>
    <div class="container">
        <div class="top-bar">
            <div class="brand">{{.Text.LobbyName}} / Shop</div>
            <div style="display:flex; gap:15px; align-items:center;">
                <div class="coin-bal">üí∞ {{.User.Coins}}</div>
                <a href="/?lang={{.Lang}}&userID={{.User.ID}}" class="close">‚úï</a>
            </div>
        </div>

        <div class="section-title">Exclusive Styles</div>
        <div class="cards">
            <div class="card">
                <div class="icon-box" style="background:linear-gradient(90deg, red, blue); color:white;">üåà</div>
                <div class="card-title">Rainbow Name</div>
                <div class="card-desc">Make your nickname shimmer with all colors.</div>
                <button class="buy-btn coins" onclick="buy('name_rainbow')">8000 Coins</button>
            </div>
            <div class="card">
                <div class="icon-box" style="color:gold; text-shadow:0 0 10px gold;">üëë</div>
                <div class="card-title">Gold Name</div>
                <div class="card-desc">A prestigious golden glow for your name.</div>
                <button class="buy-btn coins" onclick="buy('name_gold')">4000 Coins</button>
            </div>
            <div class="card">
                <div class="icon-box" style="background:linear-gradient(135deg, #00f260, #0575e6);">üèôÔ∏è</div>
                <div class="card-title">Cyber Banner</div>
                <div class="card-desc">Futuristic banner for your lobby background.</div>
                <button class="buy-btn coins" onclick="buy('banner_cyber')">3500 Coins</button>
            </div>
            <div class="card">
                <div class="icon-box" style="background:linear-gradient(135deg, gold, orange);">üèÜ</div>
                <div class="card-title">Gold Banner</div>
                <div class="card-desc">Show off your wealth with this banner.</div>
                <button class="buy-btn coins" onclick="buy('banner_gold')">5000 Coins</button>
            </div>
        </div>

        <div class="section-title">Resources</div>
        <div class="cards">
            <div class="card">
                <div class="icon-box">üí∞</div>
                <div class="card-title">Sack of Coins</div>
                <div class="card-desc">+1000 Coins</div>
                <button class="buy-btn real" onclick="buy('coins_1000')">$0.99</button>
            </div>
            <div class="card">
                <div class="icon-box">üí∞üí∞</div>
                <div class="card-title">Chest of Coins</div>
                <div class="card-desc">+5000 Coins</div>
                <button class="buy-btn real" onclick="buy('coins_5000')">$3.99</button>
            </div>
        </div>
    </div>

    <script>
        async function buy(item) {
            if(!confirm("Purchase " + item + "?")) return;
            try {
                const res = await fetch('/shop/buy', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ item_id: item, currency: 'USD' })
                });
                const data = await res.json();
                if(data.success) {
                    alert(data.message);
                    window.location.reload();
                } else {
                    alert("Error: " + data.message || "Failed");
                }
            } catch(e) { alert("Network error"); }
        }
    </script>
</body>
</html>